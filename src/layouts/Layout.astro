---
import '../styles/global.css';
import { getTranslations } from '../i18n';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import ChatBot from '../components/ChatBot.astro';
import LanguageSwitcher from '../components/LanguageSwitcher.astro';
import Analytics from '../components/Analytics.astro';

// Props interface for optional overrides
interface Props {
  title?: string;
  description?: string;
  ogImage?: string;
  ogType?: string;
}

const locale = Astro.currentLocale || 'es';
const t = getTranslations(locale); 

// Get props with defaults
const {
  title = t.title,
  description = t.description,
  ogImage = `${Astro.site}/og-image.jpg`,
  ogType = 'website'
} = Astro.props;

const schemaDescription = description;
---

<!doctype html>
<html lang={locale}>
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<meta name="google" content="notranslate" />

		<title>{title}</title>
		<meta name="description" content={description} />

		<!-- Self referencing canonical tag -->
		<link rel="canonical" href={Astro.url.toString()} />

		<!-- CRITICAL: Inline CSS for LCP banner optimization -->
		<style>
			.banner-container{width:100%;position:relative;min-height:250px;contain:layout style;}
			.banner-picture{display:block;width:100%;}
			.banner-image{width:100%;height:auto;object-fit:contain;content-visibility:auto;}
			@media (min-width:1024px){.banner-container{min-height:400px;}}
		</style>

		<!-- Structured Data -->
		<script type="application/ld+json">
			{JSON.stringify({
				"@context": "https://schema.org",
				"@type": "Event",
				"name": "JamCam 2025",
				"startDate": "2025-12-26",
				"endDate": "2026-01-02",
				"eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
				"eventStatus": "https://schema.org/EventScheduled",
				"location": {
					"@type": "Place",
					"name": "Centro Recreativo y Deportivo Comfandi Pance",
					"address": {
						"@type": "PostalAddress",
						"addressLocality": "Cali, Valle del Cauca",
						"addressCountry": "CO"
					}
				},
				"image": "/og-image.jpg",
				"description": schemaDescription,
				"organizer": {
					"@type": "Organization",
					"name": "AsociaciÃ³n Scouts de Colombia",
					"url": "https://www.scout.org.co"
				}
			})}
		</script>

		<!-- Open Graph Meta Tags -->
		<meta property="og:url" content={Astro.url.toString()}>
		<meta property="og:type" content={ogType}>
		<meta property="og:title" content={title}>
		<meta property="og:description" content={description}>
		<meta property="og:image" content={ogImage}>
		<meta property="og:image:width" content="1200">
		<meta property="og:image:height" content="630">
		<meta property="og:site_name" content="JamCam 2025">
		<meta property="og:locale" content={locale}>

		<!-- Twitter Meta Tags -->
		<meta name="twitter:card" content="summary_large_image">
		<meta name="twitter:site" content="@ScoutsColombia">
		<meta name="twitter:creator" content="@ScoutsColombia">
		<meta property="twitter:url" content={Astro.url.toString()}>
		<meta name="twitter:title" content={title}>
		<meta name="twitter:description" content={description}>
		<meta name="twitter:image" content={ogImage}>

		<!-- Favicon -->
		<link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
		<link rel="icon" href="/favicon/favicon.ico">
		<link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
		<link rel="icon" type="image/png" sizes="192x192" href="/favicon/android-chrome-192x192.png">
		<link rel="icon" type="image/png" sizes="512x512" href="/favicon/android-chrome-512x512.png">
		<link rel="manifest" href="/favicon/site.webmanifest">
		<meta name="msapplication-TileColor" content="#58238B">
		<meta name="theme-color" content="#ffffff">
		
		<!-- DNS prefetch for external resources -->
		<link rel="dns-prefetch" href="//fonts.googleapis.com">
		<link rel="preconnect" href="//fonts.gstatic.com" crossorigin>
		
		<!-- Font preloading - moved after critical banner resources -->
		<link rel="preload" href="/fonts/noto-sans-v39-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
		<link rel="preload" href="/fonts/noto-sans-v39-latin-600.woff2" as="font" type="font/woff2" crossorigin>
		<link rel="preload" href="/fonts/noto-sans-v39-latin-700.woff2" as="font" type="font/woff2" crossorigin>
		<link rel="preload" href="/fonts/noto-sans-v39-latin-300.woff2" as="font" type="font/woff2" crossorigin>

		<!-- Font faces - inline for immediate availability after preload -->
		<style>
			/* Noto Sans Font - Optimized Loading */
			@font-face {
				font-family: 'Noto Sans';
				font-style: normal;
				font-weight: 300;
				font-display: swap;
				src: url('/fonts/noto-sans-v39-latin-300.woff2') format('woff2');
				unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
			}

			@font-face {
				font-family: 'Noto Sans';
				font-style: normal;
				font-weight: 400;
				font-display: swap;
				src: url('/fonts/noto-sans-v39-latin-regular.woff2') format('woff2');
				unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
			}

			@font-face {
				font-family: 'Noto Sans';
				font-style: normal;
				font-weight: 600;
				font-display: swap;
				src: url('/fonts/noto-sans-v39-latin-600.woff2') format('woff2');
				unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
			}

			@font-face {
				font-family: 'Noto Sans';
				font-style: normal;
				font-weight: 700;
				font-display: swap;
				src: url('/fonts/noto-sans-v39-latin-700.woff2') format('woff2');
				unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
			}
		</style>

		<!-- Vercel Analytics and Speed Insights -->
		<Analytics />

	</head>
	<body>
		<Header />
			<slot />
		<Footer />
		<ChatBot />
		<LanguageSwitcher />
		
		<!-- Fun Console Log for Curious Developers -->
		<script define:vars={{ consoleMessages: t.consoleMessages }}>
			// Fun console messages for curious developers in current language
			console.log(`%cğŸ¦œ ${consoleMessages.greeting} ğŸ¦œ`, 'color: #622599; font-size: 24px; font-weight: bold; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);');
			
			console.log(`%c
	   â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
	   â”‚        ğŸŒŸ JamCam 2025 ğŸŒŸ        â”‚
	   â”‚     ${consoleMessages.cholaoWatching}     â”‚
	   â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
			`, 'color: #e46e27; font-weight: bold; font-family: monospace;');
			
			console.log(`%c${consoleMessages.areDeveloper} ğŸ‘¨â€ğŸ’»ğŸ‘©â€ğŸ’»`, 'color: #F15857; font-size: 18px; font-weight: bold;');
			console.log(`%c${consoleMessages.checkRepo} ğŸ”—âœ¨`, 'color: #622599; font-size: 16px; font-weight: bold;');
			console.log('%chttps://github.com/MiloAgudelo/jamcam-astro', 'color: #0094B4; font-size: 14px; text-decoration: underline; font-weight: bold;');
			console.log(`%c${consoleMessages.giveStar} â­ğŸš€`, 'color: #FCB813; font-size: 16px; font-weight: bold;');
			console.log(`%c
	ğŸ¦œ ${consoleMessages.cholaoSays} ğŸ”ï¸
			`, 'color: #0094B4; font-size: 14px; font-weight: bold; font-style: italic;');
			
			// Final message for developers
			console.log('%câ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'color: #e46e27;');
			console.log(`%c${consoleMessages.madeWithLove}`, 'color: #622599; font-size: 12px; font-style: italic;');
			console.log(`%c${consoleMessages.alwaysServe} ğŸ¦‰`, 'color: #F15857; font-size: 14px; font-weight: bold;');
		</script>
	</body>
</html>

<style>
	html,
	body {
		margin: 0;
		width: 100%;
		height: 100%;
		font-family: 'Noto Sans', sans-serif;
		background-color: #faf9f6;
	}

	/* Custom scrollbar for better UX */
	/* Hide scrollbar on mobile devices for cleaner look */
	@media (max-width: 768px) {
		::-webkit-scrollbar {
			display: none;
		}
		
		/* For Firefox mobile */
		* {
			scrollbar-width: none;
		}
	}

	/* Custom scrollbar for desktop */
	@media (min-width: 769px) {
		::-webkit-scrollbar {
			width: 6px;
		}

		::-webkit-scrollbar-track {
			background: #f1f1f1;
			border-radius: 3px;
		}

		::-webkit-scrollbar-thumb {
			background: rgba(98, 37, 153, 0.3); /* purple-jm with opacity */
			border-radius: 3px;
			transition: background 0.2s ease;
		}

		::-webkit-scrollbar-thumb:hover {
			background: rgba(98, 37, 153, 0.5); /* darker on hover */
		}

		/* For Firefox desktop */
		* {
			scrollbar-width: thin;
			scrollbar-color: rgba(98, 37, 153, 0.3) #f1f1f1;
		}
	}
</style>
